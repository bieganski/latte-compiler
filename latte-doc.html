<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <link rel="stylesheet" type="text/css" href="/~ben/Css/white.css">
  <link rel="stylesheet" type="text/css" href="white.css">
   <title>Compiler construction lab project</title>
</head>
<body>
<h1 id="compiler-construction-mrjp-lab-project">Compiler construction (MRJP) lab project</h1>
<p>Laboratory grade is based on a project involving the implementation of a compiler for a simple imperative language <a href="Latte/description.html">Latte</a>.</p>
<h2 id="stages">Stages</h2>
<p>The project consits of three stages:</p>
<ol type="1">
<li>Front-end: syntactic and semantic analysis - should be finished until Dec 9, but there is no separate moodle assignment for it.</li>
<li>LLVM or x86 back-end. Deadline Jan 7.</li>
<li>(optional) extensions. Deadline Jan 20.</li>
</ol>
<p>Your lab supervisor can set slightly different deadline, in particular require project presentation in person. Nonetheless, all projects must be submitted to moodle.</p>
<h3 id="scoring">Scoring</h3>
<p>At most 24 points in total, counting towards final course mark. To pass the lab and qualify to sit the exam, it is required to submit satisfactory solutions for all stages and get a total of at least 15 points (including points for the Instant compiler).</p>
<p>Points are awarded for:</p>
<ol type="1">
<li>front-end (4);</li>
<li>back-end for LLVM (8) or <strong>(exclusive)</strong> x86 (10)</li>
<li>LLVM code in SSA form - additional 1p</li>
<li>register allocation for x86 - additional (up to) 4p</li>
<li>optimisations - up to 3p</li>
<li>Extension (x/y denotes points for LLVM/x86 respectively)
<ol type="1">
<li>arrays (2)</li>
<li>structures (2)</li>
<li>objects (attributes, methods, inheritance without method override) - (3/4) extra</li>
<li>virtual methods (3/4) extra (in total 8/10 can be awarded for objects with virtual methods)</li>
<li>garbage collection (2)</li>
</ol></li>
</ol>
<p>A more precise specification of extensions is contained in the language description.</p>
<h3 id="late-submissions">Late submissions</h3>
<p>Late submissions are subject to penalty of 2p for each week started; however no submissions will be accepted after February 7.</p>
<h2 id="rules">Rules</h2>
<p>The project must be original work, developed independently by the student submitting it. In particular:</p>
<ul>
<li>you must not look at other students’ code, show or share your code in any manner.</li>
<li>any foreign code (e.g. from books, tutorials, or other sources) must be clearly marked and attributed.</li>
</ul>
<h3 id="technical-requirements">Technical requirements</h3>
<ol type="1">
<li>The project must be submitted as a packed TAR archive (.tar.gz, .tgz, tar.bz2 or .tbz)</li>
<li>The project root must contain at least:
<ul>
<li>Text file <strong>README</strong> describing how to compile and run the project, used tools and libraries, implemented extensions, structure of the project, pointers to more detailed documentation.</li>
<li><strong>Makefile</strong> allowing to build the program</li>
<li>A directory <strong>src</strong> containing only source files of the project (possibly including Latte.cf, makefiles etc.); auxiliary files such as libraries, etc should be placed in other directories.</li>
</ul></li>
<li>The project must be buildable on lab computers by running <strong>make</strong> in the project root.</li>
<li>All necessary libraries (except standard library of the programming language used) must be described in README.</li>
<li>After the build, project root must contain an executable file <strong>latc</strong> (may be a shell script calling other programs)</li>
<li>The compiler must accept all test programs from the directory <strong>good</strong> and reject (with appropriate error messages) all programs from the directory <strong>bad</strong>. For the extensions, the compiler must accept all programs from the respective subdirectories in <strong>extension</strong>. Execution of a correct test program must give output exactly the same as in the corresponding <strong>.output</strong> file (given input in the corresponding <strong>.input</strong> file, if any).</li>
<li>For an accepted program, the compiler must output OK (<code>"OK\n"</code>) and exit with code 0.</li>
<li>For a rejected program, the first line of stderr must be ERROR (<code>"ERROR\n"</code>). Further lines should contain appropriate error messages. The compiler must then exit with a non-zero exit code.</li>
</ol>
<h4 id="llvm-backend">LLVM backend</h4>
<ol type="1">
<li>After running <strong>make</strong> the project root should contain executable <strong>latc_llvm</strong></li>
<li>Running <strong>latc_llvm foo/bar/baz.lat</strong> for a correct program <strong>baz.lat</strong> should create files <strong>baz.ll</strong> (readable LLVM code) and executable <strong>a.out</strong> in the directory <strong>foo/bar</strong>.</li>
<li>Helper functions (<strong>printInt</strong> etc.) should be placed in the file <strong>runtime.bc</strong> in the <strong>lib</strong> directory (with sources in <strong>runtime.ll</strong>).</li>
</ol>
<h4 id="x86-backend">x86 backend</h4>
<ol type="1">
<li>After running <strong>make</strong> the project root should contain executable <strong>latc_ARCH</strong> where ARCH is x86 or x86_64</li>
<li>Running <strong>latc_ARCH foo/bar/baz.lat</strong> for a correct program <strong>baz.lat</strong> should create files <strong>baz.s</strong> (assembly) and executtable <strong>a.out</strong> in the directory <strong>foo/bar</strong>.</li>
<li>Helper functions (<strong>printInt</strong> etc.) should be placed in the file <strong>runtime.o</strong> in the <strong>lib</strong> directory (with sources in <strong>runtime.s</strong>).</li>
</ol>
<p>Test programs archive:</p>
<p><a href="Latte/lattests121017.tgz">lattests121017.tgz</a>, MD5:49ca5702ca9795fb8f33d52b0b3c6fc3</p>
</body>
</html>
